{
    "sourceFile": "Scripts/utils.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 13,
            "patches": [
                {
                    "date": 1752672271084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753706354081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,12 +61,15 @@\n  * Esconde todas as principais \"telas\" da aplicação para exibir uma nova.\r\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n+        // IDs que existem apenas em Index.html\r\n         document.getElementById('initialLoginScreen'),\r\n         document.getElementById('cnpjLoginScreen'),\r\n         document.getElementById('adminLoginScreen'),\r\n         document.getElementById('userLoginScreen'),\r\n+\r\n+        // IDs que existem em OrgBoletos.html\r\n         document.getElementById('adminDashboardScreen'),\r\n         document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n@@ -75,10 +78,16 @@\n         document.getElementById('quickUserAddModal')\r\n     ];\r\n \r\n     screens.forEach(screen => {\r\n-        if (screen) screen.classList.add('hidden');\r\n+        // A CORREÇÃO ESTÁ AQUI:\r\n+        // Verificamos se o elemento (screen) não é nulo antes de usar o classList.\r\n+        if (screen) {\r\n+            screen.classList.add('hidden');\r\n+        }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n-    if (openAddBillModalBtn) openAddBillModalBtn.classList.add('hidden');\r\n+    if (openAddBillModalBtn) {\r\n+        openAddBillModalBtn.classList.add('hidden');\r\n+    }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753823057452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,33 +61,29 @@\n  * Esconde todas as principais \"telas\" da aplicação para exibir uma nova.\r\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n-        // IDs que existem apenas em Index.html\r\n-        document.getElementById('initialLoginScreen'),\r\n-        document.getElementById('cnpjLoginScreen'),\r\n-        document.getElementById('adminLoginScreen'),\r\n-        document.getElementById('userLoginScreen'),\r\n-\r\n-        // IDs que existem em OrgBoletos.html\r\n         document.getElementById('adminDashboardScreen'),\r\n         document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n-        document.getElementById('quickUserAddModal')\r\n+        document.getElementById('quickUserAddModal'),\r\n+        document.getElementById('subscriptionModal'),\r\n+        document.getElementById('accessBlockedModal'),\r\n+        document.getElementById('loadingScreen')\r\n     ];\r\n \r\n     screens.forEach(screen => {\r\n-        // A CORREÇÃO ESTÁ AQUI:\r\n-        // Verificamos se o elemento (screen) não é nulo antes de usar o classList.\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n+            screen.style.display = 'none';\r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n+        openAddBillModalBtn.style.display = 'none';\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753824872234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,8 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n-        document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n"
                },
                {
                    "date": 1753825244340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,8 +62,9 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n+        document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n@@ -82,7 +83,8 @@\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n-        openAddBillModalBtn.style.display = 'none';\r\n+        // --- LINHA ADICIONADA ---\r\n+\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753825258354,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n-        document.getElementById('mainAppContent'),\r\n+\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n"
                },
                {
                    "date": 1753825266600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n-\r\n+        document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n@@ -84,7 +84,7 @@\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n         // --- LINHA ADICIONADA ---\r\n-\r\n+        openAddBillModalBtn.style.display = 'none';\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753825392862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n-        document.getElementById('mainAppContent'),\r\n+        //document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n"
                },
                {
                    "date": 1753884112248,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n  */\r\n export function hideAllScreens() {\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n-        //document.getElementById('mainAppContent'),\r\n+        document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n         document.getElementById('addBillModal'),\r\n         document.getElementById('billModal'),\r\n         document.getElementById('barcodeFullScreenModal'),\r\n"
                },
                {
                    "date": 1753897322613,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,15 +76,12 @@\n \r\n     screens.forEach(screen => {\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n-            screen.style.display = 'none';\r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n-        // --- LINHA ADICIONADA ---\r\n-        openAddBillModalBtn.style.display = 'none';\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753900510571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,8 +76,14 @@\n \r\n     screens.forEach(screen => {\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n+            \r\n+            // --- INÍCIO DA CORREÇÃO ---\r\n+            // Adicionamos esta linha para remover qualquer estilo 'display'\r\n+            // que tenha sido aplicado diretamente, garantindo que a classe 'hidden' funcione.\r\n+            screen.style.display = '';\r\n+            // --- FIM DA CORREÇÃO ---\r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n"
                },
                {
                    "date": 1753901065213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,18 +76,18 @@\n \r\n     screens.forEach(screen => {\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n-            \r\n-            // --- INÍCIO DA CORREÇÃO ---\r\n-            // Adicionamos esta linha para remover qualquer estilo 'display'\r\n-            // que tenha sido aplicado diretamente, garantindo que a classe 'hidden' funcione.\r\n             screen.style.display = '';\r\n-            // --- FIM DA CORREÇÃO ---\r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n+        \r\n+        // --- INÍCIO DA CORREÇÃO ---\r\n+        // Adicionamos esta linha para garantir que o estilo direto do botão seja removido.\r\n+        openAddBillModalBtn.style.display = '';\r\n+        // --- FIM DA CORREÇÃO ---\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1754066285955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,10 @@\n /**\r\n  * Esconde todas as principais \"telas\" da aplicação para exibir uma nova.\r\n  */\r\n export function hideAllScreens() {\r\n+    // Verifique se todos estes IDs estão na sua lista.\r\n+    // O mais importante é garantir que 'adminDashboardScreen' está aqui.\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n         document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n@@ -76,18 +78,16 @@\n \r\n     screens.forEach(screen => {\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n-            screen.style.display = '';\r\n+            // Esta linha extra remove qualquer estilo 'display' direto que possa ter sido aplicado,\r\n+            // permitindo que a classe 'hidden' (display: none) do Tailwind funcione corretamente.\r\n+            screen.style.display = ''; \r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n     if (openAddBillModalBtn) {\r\n         openAddBillModalBtn.classList.add('hidden');\r\n-        \r\n-        // --- INÍCIO DA CORREÇÃO ---\r\n-        // Adicionamos esta linha para garantir que o estilo direto do botão seja removido.\r\n         openAddBillModalBtn.style.display = '';\r\n-        // --- FIM DA CORREÇÃO ---\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1754066418555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,10 +60,8 @@\n /**\r\n  * Esconde todas as principais \"telas\" da aplicação para exibir uma nova.\r\n  */\r\n export function hideAllScreens() {\r\n-    // Verifique se todos estes IDs estão na sua lista.\r\n-    // O mais importante é garantir que 'adminDashboardScreen' está aqui.\r\n     const screens = [\r\n         document.getElementById('adminDashboardScreen'),\r\n         document.getElementById('mainAppContent'),\r\n         document.getElementById('companyDetailsModal'),\r\n@@ -78,11 +76,9 @@\n \r\n     screens.forEach(screen => {\r\n         if (screen) {\r\n             screen.classList.add('hidden');\r\n-            // Esta linha extra remove qualquer estilo 'display' direto que possa ter sido aplicado,\r\n-            // permitindo que a classe 'hidden' (display: none) do Tailwind funcione corretamente.\r\n-            screen.style.display = ''; \r\n+            screen.style.display = '';\r\n         }\r\n     });\r\n \r\n     const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n"
                }
            ],
            "date": 1752672271084,
            "name": "Commit-0",
            "content": "/**\r\n * Mostra uma notificação (toast) no canto do ecrã.\r\n * @param {string} message - A mensagem a ser exibida.\r\n * @param {string} type - O tipo de notificação ('success', 'error', ou 'info').\r\n */\r\nexport function showToast(message, type = 'success') {\r\n    const toastMessage = document.getElementById('toastMessage');\r\n    if (!toastMessage) return;\r\n\r\n    toastMessage.textContent = message;\r\n    toastMessage.className = `fixed top-4 right-4 text-white px-4 py-2 rounded-md shadow-lg flex items-center fade-in z-50`;\r\n    \r\n    if (type === 'success') toastMessage.classList.add('bg-green-500');\r\n    else if (type === 'error') toastMessage.classList.add('bg-red-500');\r\n    else if (type === 'info') toastMessage.classList.add('bg-blue-500');\r\n    \r\n    toastMessage.classList.remove('hidden');\r\n    \r\n    setTimeout(() => {\r\n        toastMessage.classList.add('opacity-0', 'transition-opacity', 'duration-300');\r\n        setTimeout(() => {\r\n            toastMessage.classList.add('hidden');\r\n            toastMessage.classList.remove('opacity-0', 'transition-opacity', 'duration-300');\r\n        }, 300);\r\n    }, 3000);\r\n}\r\n\r\n/**\r\n * Mostra o ícone de carregamento (spinner) global.\r\n */\r\nexport function showLoader() {\r\n    const generalLoader = document.getElementById('generalLoader');\r\n    if (generalLoader) generalLoader.classList.remove('hidden');\r\n}\r\n\r\n/**\r\n * Esconde o ícone de carregamento (spinner) global.\r\n */\r\nexport function hideLoader() {\r\n    const generalLoader = document.getElementById('generalLoader');\r\n    if (generalLoader) generalLoader.classList.add('hidden');\r\n}\r\n\r\n/**\r\n * Formata um número de CNPJ com a máscara padrão (XX.XXX.XXX/YYYY-ZZ).\r\n * @param {string} value - O valor do CNPJ a ser formatado.\r\n * @returns {string} - O CNPJ formatado.\r\n */\r\nexport function formatCnpj(value) {\r\n    if (!value) return '';\r\n    value = value.replace(/\\D/g, '');\r\n    if (value.length > 14) value = value.slice(0, 14);\r\n    if (value.length > 12) return value.replace(/^(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})$/, '$1.$2.$3/$4-$5');\r\n    if (value.length > 8) return value.replace(/^(\\d{2})(\\d{3})(\\d{3})(\\d{4})$/, '$1.$2.$3/$4');\r\n    if (value.length > 5) return value.replace(/^(\\d{2})(\\d{3})(\\d{3})$/, '$1.$2.$3');\r\n    if (value.length > 2) return value.replace(/^(\\d{2})(\\d{3})$/, '$1.$2');\r\n    return value;\r\n}\r\n\r\n/**\r\n * Esconde todas as principais \"telas\" da aplicação para exibir uma nova.\r\n */\r\nexport function hideAllScreens() {\r\n    const screens = [\r\n        document.getElementById('initialLoginScreen'),\r\n        document.getElementById('cnpjLoginScreen'),\r\n        document.getElementById('adminLoginScreen'),\r\n        document.getElementById('userLoginScreen'),\r\n        document.getElementById('adminDashboardScreen'),\r\n        document.getElementById('mainAppContent'),\r\n        document.getElementById('companyDetailsModal'),\r\n        document.getElementById('addBillModal'),\r\n        document.getElementById('billModal'),\r\n        document.getElementById('barcodeFullScreenModal'),\r\n        document.getElementById('quickUserAddModal')\r\n    ];\r\n\r\n    screens.forEach(screen => {\r\n        if (screen) screen.classList.add('hidden');\r\n    });\r\n\r\n    const openAddBillModalBtn = document.getElementById('openAddBillModalBtn');\r\n    if (openAddBillModalBtn) openAddBillModalBtn.classList.add('hidden');\r\n}"
        }
    ]
}